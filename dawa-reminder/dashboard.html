<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>  App</title>
    <link rel="stylesheet" href="css/app-style.css">
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>

<div class="app-container">
    
    <nav class="bottom-nav">
        <a href="#" class="nav-item active" onclick="switchView('dashboard')">
            <i class="ph-fill ph-house"></i> <span>Home</span>
        </a>
        <a href="#">
            <i class="ph ph-chart-bar"></i> <span>Reports</span>
        </a>
        <a href="#" class="nav-item" onclick="switchView('profile')">
            <i class="ph ph-user"></i> <span>Profile</span>
       </a>
    </nav>

    <div id="view-dashboard">
        <header class="app-header">
            <div class="header-top">
                <div class="user-greeting">
                    <h1 id="greeting">Hello, Patient ðŸ‘‹</h1>
                    <p id="doses-remaining">Loading...</p>
                </div>
                <button
                    type="button"
                    class="profile-pic avatar-action"
                    id="header-profile-pic"
                    aria-label="Open profile"
                    title="Open profile"
                    onclick="switchView('profile')"
                >AJ</button>
            </div>

            <div class="progress-card">
                <div class="progress-info">
                    <h3>Your Progress</h3>
                    <p id="progress-percent">0%</p>
                </div>
                <div class="ring-wrapper">
                    <svg width="80" height="80">
                        <circle cx="40" cy="40" r="30" class="ring-bg"></circle>
                        <circle cx="40" cy="40" r="30" class="ring-progress" id="progress-ring"></circle>
                    </svg>
                </div>
            </div>
        </header>

        <main class="schedule-container">
            <div class="section-head">
                <h2>Today's Schedule</h2>
                <span id="current-date" class="date-badge">Today</span>
            </div>
            <div id="med-filter-bar" style="display:flex; gap:10px; margin-bottom:20px;"></div>
            <div id="schedule-list"></div>
        </main>

        <button class="fab" onclick="switchView('add')">
            <i class="ph-bold ph-plus"></i>
        </button>
    </div>

    <div id="view-add" class="hidden">
        <div class="form-header">
            <button class="back-btn" onclick="switchView('dashboard')">
                <i class="ph-bold ph-arrow-left"></i>
            </button>
            <h2>Add Medication</h2>
        </div>

        <form id="add-med-form">
            <div class="form-group">
                <label>Medication Name</label>
                <div class="input-wrapper">
                    <i class="ph ph-pill"></i>
                    <input type="text" id="med-name" placeholder="e.g. Amoxicillin" required>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>Amount</label>
                    <input type="number" id="med-amount" value="1" class="input-box">
                </div>
                <div class="form-group">
                    <label>Unit</label>
                    <select id="med-unit" class="input-box">
                        <option value="Tablet">Tablet</option>
                        <option value="mg">mg</option>
                        <option value="ml">ml</option>
                    </select>
                </div>
            </div>

            <div class="form-group">
                <label>Frequency</label>
                <select id="med-frequency" class="input-box" onchange="updateTimeInputs()">
                    <option value="1">Once a day</option>
                    <option value="2">Twice a day</option>
                    <option value="3">3x a day</option>
                </select>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>Start Date</label>
                    <input type="date" id="med-start-date" class="input-box" required>
                </div>
                <div class="form-group">
                    <label>End Date</label>
                    <input type="date" id="med-end-date" class="input-box" required>
                </div>
            </div>

            <div class="form-group">
                <label>Intake Times</label>
                <div id="time-slots-container" class="time-grid">
                    </div>
            </div>

            <button type="submit" class="btn-save">Save Schedule</button>
        </form>
    </div>
<div id="view-profile" class="hidden">
    <div class="dashboard-wrapper">
        
        <div class="profile-header">
            <button
                type="button"
                class="profile-avatar avatar-action"
                id="profile-avatar"
                aria-label="Edit profile"
                title="Edit profile"
            >AJ</button>
            <h2 id="profile-name">Alex Johnson</h2>
            <p id="profile-patient-id">Patient ID: #883920</p>
            <button class="btn-edit" id="edit-profile-btn" type="button">Edit Profile</button>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <span class="label">Age</span>
                <span class="value" id="profile-age">34</span>
            </div>
            <div class="stat-card">
                <span class="label">Weight</span>
                <span class="value" id="profile-weight">72kg</span>
            </div>
            <div class="stat-card">
                <span class="label">Blood</span>
                <span class="value" id="profile-blood">O+</span>
            </div>
        </div>

        <div class="menu-list">
            <div class="menu-item menu-item-control" id="notifications-menu-item">
                <div class="menu-icon"><i class="ph ph-bell"></i></div>
                <div class="menu-text">
                    <h4>Notifications</h4>
                    <p id="notification-status-text">Checking...</p>
                </div>
                <button type="button" id="notification-toggle-btn" class="menu-toggle-btn">Enable</button>
            </div>

            <div class="menu-item">
                <div class="menu-icon"><i class="ph ph-shield-check"></i></div>
                <div class="menu-text">
                    <h4>Privacy & Security</h4>
                    <p>Password, 2FA</p>
                </div>
                <i class="ph ph-caret-right"></i>
            </div>

            <div class="menu-item">
                <div class="menu-icon"><i class="ph ph-gear"></i></div>
                <div class="menu-text">
                    <h4>App Settings</h4>
                    <p>Language, Theme</p>
                </div>
                <i class="ph ph-caret-right"></i>
            </div>
        </div>

        <div class="menu-list" id="sharing-settings-panel">
            <div class="menu-item" style="cursor:default;">
                <div class="menu-icon"><i class="ph ph-share-network"></i></div>
                <div class="menu-text">
                    <h4>App Settings & Sharing</h4>
                    <p>Unlock sound and share your patient ID with your doctor.</p>
                </div>
            </div>
            <div class="menu-item menu-item-control" style="cursor:default;">
                <div class="menu-icon"><i class="ph ph-speaker-high"></i></div>
                <div class="menu-text">
                    <h4>Notification Sound</h4>
                    <p>Play a test sound to enable browser audio prompts.</p>
                </div>
                <button type="button" id="test-sound-btn" class="menu-toggle-btn">Test Sound</button>
            </div>
            <div class="menu-item menu-item-control" style="cursor:default; align-items:flex-start;">
                <div class="menu-icon"><i class="ph ph-identification-card"></i></div>
                <div class="menu-text">
                    <h4>My Patient ID</h4>
                    <input type="text" id="my-patient-id" class="input-box" value="" readonly style="margin-top:8px;">
                </div>
                <button type="button" id="copy-patient-id-btn" class="menu-toggle-btn">Copy</button>
            </div>
        </div>

        <button class="btn-logout" onclick="window.location.href='index.html'">
            <i class="ph ph-sign-out"></i> Log Out
        </button>

    </div>
</div>

</div>

<div id="profile-modal" class="profile-modal hidden">
    <div class="profile-modal-card">
        <h3>Edit Profile</h3>
        <form id="profile-form">
            <div class="profile-form-grid">
                <div class="form-group">
                    <label for="profile-input-name">Full Name</label>
                    <input type="text" id="profile-input-name" class="input-box" required>
                </div>
                <div class="form-group">
                    <label for="profile-input-age">Age</label>
                    <input type="number" id="profile-input-age" class="input-box" min="0" max="130" placeholder="e.g. 34">
                </div>
                <div class="form-group">
                    <label for="profile-input-weight">Weight</label>
                    <input type="text" id="profile-input-weight" class="input-box" placeholder="e.g. 72 kg">
                </div>
                <div class="form-group">
                    <label for="profile-input-blood">Blood Group</label>
                    <select id="profile-input-blood" class="input-box">
                        <option value="">Select blood group</option>
                        <option value="A+">A+</option>
                        <option value="A-">A-</option>
                        <option value="B+">B+</option>
                        <option value="B-">B-</option>
                        <option value="AB+">AB+</option>
                        <option value="AB-">AB-</option>
                        <option value="O+">O+</option>
                        <option value="O-">O-</option>
                    </select>
                </div>
            </div>
            <div class="profile-form-actions">
                <button type="button" class="btn-cancel" id="cancel-profile-btn">Cancel</button>
                <button type="submit" class="btn-save-inline">Save Profile</button>
            </div>
        </form>
    </div>
</div>

<script src="js/app-logic.js"></script>
</body>
</html>
